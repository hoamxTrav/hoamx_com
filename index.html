<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>HOAMX - HOA Modern Experience</title>
    <link rel='stylesheet' href='theme.css'>
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
        header, footer { background-color: #003366; color: white; text-align: center; padding: 20px; }
        header img { max-height: 60px; }
        section { padding: 40px; text-align: center; }
        form { max-width: 400px; margin: 0 auto; text-align: left; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, select { width: 100%; padding: 8px; }
        button { background-color: #003366; color: white; padding: 10px 20px; border: none; cursor: pointer; }
        #thank-you { display: none; color: green; font-weight: bold; margin-top: 20px; text-align: center; }
    </style>
</head>
<body>
    <header>
        <img src='images/logo.png' alt='HOAMX Logo'>
        <h1>MX means Modern Experience</h1>
        <h2>Every Communication Recorded, Every Decision Documented.</h2>
    </header>

    <section>
        <h3>Start Your Free Trial</h3>
        <p>Set up your HOA and explore all features today!</p>
        <form id='trial-form'>
            <div class='form-group'>
                <label>First Name *</label>
                <input type='text' name='firstName' required>
            </div>
            <div class='form-group'>
                <label>Email *</label>
                <input type='email' name='email' required>
            </div>
            <div class='form-group'>
                <label>Homeowners Association Name *</label>
                <input type='text' name='hoaName' required>
            </div>
            <div class='form-group'>
                <label>Position on Board *</label>
                <select name='position' required>
                    <option value=''>Select Position</option>
                    <option>President</option>
                    <option>Vice President</option>
                    <option>Treasurer</option>
                    <option>Secretary</option>
                    <option>Member at Large</option>
                    <option>Not on the Board</option>
                </select>
            </div>
            <input type='hidden' name='ip' id='ip-field'>
            <button type='submit'>Start Your Free Trial</button>
        </form>
        <div id='thank-you'>Thank you! You will get a response soon.</div>
    </section>

    <footer>
        <p>Contact us: info@hoamx.com | (763) 424-5566</p>
        <p id='visitor-info'></p>
    </footer>

    <script>
        let visitorIP = '';
        async function getVisitorInfo() {
            const response = await fetch('https://api.ipify.org?format=json');
            const data = await response.json();
            visitorIP = data.ip;
            document.getElementById('ip-field').value = visitorIP;
            document.getElementById('visitor-info').innerText = `Your IP: ${visitorIP} | Time: ${new Date().toLocaleString()}`;
        }
        getVisitorInfo();

        document.getElementById('trial-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = Object.fromEntries(new FormData(e.target).entries());
            const response = await fetch('/api/submitTrial', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(formData)
            });
            if (response.ok) {
                document.getElementById('trial-form').style.display = 'none';
                document.getElementById('thank-you').style.display = 'block';
            }
        });
    </script>
</body>
</html>
